!function(t){"use strict";var e=Modernizr.cssanimations,n={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"}[Modernizr.prefixed("animation")];function i(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function r(t,e){this.el=t,this.options=i({},this.options),i(this.options,e),this.menus=[].slice.call(this.el.querySelectorAll(".menu__level")),this.current=0,this._init()}r.prototype.options={breadcrumbsCtrl:!1,initialBreadcrumb:"all",backCtrl:!0,itemsDelayInterval:60,direction:"r2l",onItemClick:function(t,e){return!1}},r.prototype._init=function(){this.menusArr=[];var t=this;this.menus.forEach(function(e,n){var i={menuEl:e,menuItems:[].slice.call(e.querySelectorAll(".menu-item"))};t.menusArr.push(i),n===t.current&&classie.add(e,"menu__level--current")}),this.options.backCtrl&&(this.backCtrl=document.createElement("button"),this.backCtrl.className="menu__back menu__back--hidden",this.backCtrl.setAttribute("aria-label","Go back"),this.backCtrl.innerHTML='<span class="fa fa-arrow-left"></span>Back',this.el.insertBefore(this.backCtrl,this.el.firstChild)),t.options.breadcrumbsCtrl&&(this.breadcrumbsCtrl=document.createElement("nav"),this.breadcrumbsCtrl.className="menu__breadcrumbs",this.el.insertBefore(this.breadcrumbsCtrl,this.el.firstChild),this._addBreadcrumb(0)),this._initEvents()},r.prototype._initEvents=function(){for(var t=this,e=0,n=this.menusArr.length;e<n;++e)this.menusArr[e].menuItems.forEach(function(e,n){null!=e.querySelector("a")&&e.querySelector("a").addEventListener("click",function(e){var i=this.getAttribute("data-submenu"),r=this.innerHTML,a=t.el.querySelector('ul[data-menu="'+i+'"]');i&&a&&(e.preventDefault(),t._openSubMenu(a,n,r))})});this.options.backCtrl&&this.backCtrl.addEventListener("click",function(){t._back()})},r.prototype._openSubMenu=function(t,e,n){if(this.isAnimating)return!1;this.isAnimating=!0,this.menusArr[this.menus.indexOf(t)].backIdx=this.current,this.menusArr[this.menus.indexOf(t)].name=n,this._menuOut(e),this._menuIn(t,e)},r.prototype._back=function(){if(this.isAnimating)return!1;this.isAnimating=!0,this._menuOut();var t=this.menusArr[this.menusArr[this.current].backIdx].menuEl;this._menuIn(t),this.options.breadcrumbsCtrl&&this.breadcrumbsCtrl.removeChild(this.breadcrumbsCtrl.lastElementChild)},r.prototype._menuOut=function(t){var e=this,n=this.menusArr[this.current].menuEl,i=void 0===t;this.menusArr[this.current].menuItems.forEach(function(n,r){n.style.WebkitAnimationDelay=n.style.animationDelay=i?parseInt(r*e.options.itemsDelayInterval)+"ms":parseInt(Math.abs(t-r)*e.options.itemsDelayInterval)+"ms"}),"r2l"===this.options.direction?classie.add(n,i?"animate-outToRight":"animate-outToLeft"):classie.add(n,i?"animate-outToLeft":"animate-outToRight")},r.prototype._menuIn=function(t,i){var r=this,a=this.menusArr[this.current].menuEl,s=void 0===i,o=this.menus.indexOf(t),m=this.menusArr[o].menuItems,u=m.length;m.forEach(function(m,c){var l,h,d;m.style.WebkitAnimationDelay=m.style.animationDelay=s?parseInt(c*r.options.itemsDelayInterval)+"ms":parseInt(Math.abs(i-c)*r.options.itemsDelayInterval)+"ms",c===(i<=u/2||s?u-1:0)&&(l=m,h=function(){"r2l"===r.options.direction?(classie.remove(a,s?"animate-outToRight":"animate-outToLeft"),classie.remove(t,s?"animate-inFromLeft":"animate-inFromRight")):(classie.remove(a,s?"animate-outToLeft":"animate-outToRight"),classie.remove(t,s?"animate-inFromRight":"animate-inFromLeft")),classie.remove(a,"menu__level--current"),classie.add(t,"menu__level--current"),r.current=o,s?0===r.current&&r.options.backCtrl&&classie.add(r.backCtrl,"menu__back--hidden"):(r.options.backCtrl&&classie.remove(r.backCtrl,"menu__back--hidden"),r._addBreadcrumb(o)),r.isAnimating=!1},d=function(t){if(e){if(t.target!=this)return;this.removeEventListener(n,d)}h&&"function"==typeof h&&h.call()},e?l.addEventListener(n,d):d())}),"r2l"===this.options.direction?classie.add(t,s?"animate-inFromLeft":"animate-inFromRight"):classie.add(t,s?"animate-inFromRight":"animate-inFromLeft")},r.prototype._addBreadcrumb=function(t){if(!this.options.breadcrumbsCtrl)return!1;var e=document.createElement("a");e.innerHTML=t?this.menusArr[t].name:this.options.initialBreadcrumb,this.breadcrumbsCtrl.appendChild(e),e.className="mob-icon-arrow-right";var n=this;e.addEventListener("click",function(i){if(i.preventDefault(),!e.nextSibling||n.isAnimating)return!1;n.isAnimating=!0,n._menuOut();var r,a=n.menusArr[t].menuEl;for(n._menuIn(a);r=e.nextSibling;)n.breadcrumbsCtrl.removeChild(r)})},t.MLMenu=r}(window),function(){var t=document.getElementById("mobile-menu");if(t){mlmenu=new MLMenu(t,{backCtrl:!0,itemsDelayInterval:0});var e=document.querySelector(".action--open"),n=document.querySelector(".action--close");e.addEventListener("click",function(){classie.add(t,"menu--open")}),n.addEventListener("click",i)}function i(){classie.remove(t,"menu--open")}var r=document.querySelector(".site-content-contain");try{r.addEventListener("click",i)}catch(t){}}();
